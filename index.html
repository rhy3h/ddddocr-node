<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ddddocr-node</title><meta name="description" content="Documentation for ddddocr-node"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">ddddocr-node</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>ddddocr-node</h1></div><div class="tsd-panel tsd-typography"><h1 id="ddddocr-js" class="tsd-anchor-link">DdddOcr JS<a href="#ddddocr-js" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://www.npmjs.com/package/ddddocr-node"><img src="https://img.shields.io/npm/v/ddddocr-node.svg" alt="npm"></a></p>
<p>This project is a port of the Python project <a href="https://github.com/sml2h3/ddddocr">DdddOcr</a>.</p>
<p>The goal is to make it easy to use this trained model for text detection in JavaScript.</p>
<p><a href="https://rhy3h.github.io/ddddocr-node/">Docs</a></p>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">ddddocr-node</span>
</code><button type="button">Copy</button></pre>

<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Basic OCR recognition capability</li>
<li>OCR probability output</li>
<li>Object detection capability</li>
</ul>
<h3 id="basic-ocr-recognition-capability" class="tsd-anchor-link">Basic OCR recognition capability<a href="#basic-ocr-recognition-capability" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Primarily used for recognizing single-line text, where the text occupies the main portion of the image, such as common alphanumeric captchas. This project can recognize Chinese characters, English (with random case sensitivity or case constrained by specified ranges), numbers, and certain special characters.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">DdddOcr</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;ddddocr-node&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ddddOcr</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">DdddOcr</span><span class="hl-1">();</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">result</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-6">ddddOcr</span><span class="hl-1">.</span><span class="hl-0">classification</span><span class="hl-1">(</span><span class="hl-2">&#39;example.jpg&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">result</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>This library includes two built-in OCR models, which do not switch automatically by default. You need to use <code>setOcrMode()</code> with parameters to switch between them.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">DdddOcr</span><span class="hl-1">, </span><span class="hl-4">MODEL_TYPE</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;ddddocr-node&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-7">// Method 1: Enable Beta OCR mode after creating an instance</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ddddOcr</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">DdddOcr</span><span class="hl-1">();</span><br/><span class="hl-6">ddddOcr</span><span class="hl-1">.</span><span class="hl-0">setOcrMode</span><span class="hl-1">(</span><span class="hl-4">MODEL_TYPE</span><span class="hl-1">.</span><span class="hl-4">OCR_BETA</span><span class="hl-1">);</span><br/><br/><span class="hl-7">// Method 2: Directly enable Beta OCR mode during instance creation</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ddddOcr</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">DdddOcr</span><span class="hl-1">().</span><span class="hl-0">setOcrMode</span><span class="hl-1">(</span><span class="hl-4">MODEL_TYPE</span><span class="hl-1">.</span><span class="hl-4">OCR_BETA</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">result</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-6">ddddOcr</span><span class="hl-1">.</span><span class="hl-0">classification</span><span class="hl-1">(</span><span class="hl-2">&#39;example.jpg&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">result</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="ocr-probability-output" class="tsd-anchor-link">OCR probability output<a href="#ocr-probability-output" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To provide more flexible control and range restriction for OCR results, the project supports setting range limitations on OCR results.</p>
<p>The <code>setRanges()</code> method restricts the returned characters.</p>
<p>This method accepts one parameter. If the input is of type <code>int</code>, it refers to a predefined character set restriction. If the input is of type <code>string</code>, it represents a custom character set.</p>
<p>For int input, please refer to the table below.</p>
<table>
<thead>
<tr>
<th>Parameter <br/> Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Pure integers 0-9</td>
</tr>
<tr>
<td>1</td>
<td>Pure lowercase letters a-z</td>
</tr>
<tr>
<td>2</td>
<td>Pure uppercase letters A-Z</td>
</tr>
<tr>
<td>3</td>
<td>Lowercase letters a-z + uppercase letters A-Z</td>
</tr>
<tr>
<td>4</td>
<td>Lowercase letters a-z + integers 0-9</td>
</tr>
<tr>
<td>5</td>
<td>Uppercase letters A-Z + integers 0-9</td>
</tr>
<tr>
<td>6</td>
<td>Lowercase letters a-z + uppercase letters A-Z + integers 0-9</td>
</tr>
<tr>
<td>7</td>
<td>Default character set - lowercase a-z, uppercase A-Z, and integers 0-9</td>
</tr>
</tbody>
</table>
<p>For <code>string</code> input, provide a string where each character is treated as a candidate character, e.g., <code>&quot;0123456789+-x/=&quot;</code>.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">DdddOcr</span><span class="hl-1">, </span><span class="hl-4">CHARSET_RANGE</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;ddddocr-node&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ddddOcr</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">DdddOcr</span><span class="hl-1">();</span><br/><span class="hl-6">ddddOcr</span><span class="hl-1">.</span><span class="hl-0">setRanges</span><span class="hl-1">(</span><span class="hl-4">CHARSET_RANGE</span><span class="hl-1">.</span><span class="hl-4">NUM_CASE</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">result</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-6">ddddOcr</span><span class="hl-1">.</span><span class="hl-0">classification</span><span class="hl-1">(</span><span class="hl-2">&#39;example.jpg&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">result</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="object-detection-capability" class="tsd-anchor-link">Object detection capability<a href="#object-detection-capability" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The main purpose is to quickly detect the possible location of the target object in the image. Since the detected target may not necessarily be text, this function only provides the bounding box (bbox) location of the target. In object detection, we typically use a bbox (bounding box) to describe the target location. A bbox is a rectangular frame, which can be determined by the x and y coordinates of the top-left corner and the x and y coordinates of the bottom-right corner.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">DdddOcr</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;ddddocr-node&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ddddOcr</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">DdddOcr</span><span class="hl-1">();</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">result</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-6">ddddOcr</span><span class="hl-1">.</span><span class="hl-0">detection</span><span class="hl-1">(</span><span class="hl-2">&#39;example.jpg&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">result</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>If you want to add the detected bounding box to the original image, here is an example.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">Jimp</span><span class="hl-1">, </span><span class="hl-4">cssColorToHex</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;jimp&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">DdddOcr</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;ddddocr-node&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">drawRectangle</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;ddddocr-core&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">ddddOcr</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">DdddOcr</span><span class="hl-1">();</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">result</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-6">ddddOcr</span><span class="hl-1">.</span><span class="hl-0">detection</span><span class="hl-1">(</span><span class="hl-2">&#39;example.jpg&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">image</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-6">Jimp</span><span class="hl-1">.</span><span class="hl-0">read</span><span class="hl-1">(</span><span class="hl-2">&#39;example.jpg&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">color</span><span class="hl-1"> = </span><span class="hl-0">cssColorToHex</span><span class="hl-1">(</span><span class="hl-2">&#39;#ff0000&#39;</span><span class="hl-1">);</span><br/><span class="hl-5">for</span><span class="hl-1"> (</span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-6">i</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">; </span><span class="hl-6">i</span><span class="hl-1"> &lt; </span><span class="hl-6">result</span><span class="hl-1">.</span><span class="hl-6">length</span><span class="hl-1">; </span><span class="hl-6">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> [</span><span class="hl-4">x1</span><span class="hl-1">, </span><span class="hl-4">y1</span><span class="hl-1">, </span><span class="hl-4">x2</span><span class="hl-1">, </span><span class="hl-4">y2</span><span class="hl-1">] = </span><span class="hl-6">result</span><span class="hl-1">[</span><span class="hl-6">i</span><span class="hl-1">];</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">points</span><span class="hl-1"> = [</span><br/><span class="hl-1">        { </span><span class="hl-6">x:</span><span class="hl-1"> </span><span class="hl-6">x1</span><span class="hl-1">, </span><span class="hl-6">y:</span><span class="hl-1"> </span><span class="hl-6">y1</span><span class="hl-1"> },</span><br/><span class="hl-1">        { </span><span class="hl-6">x:</span><span class="hl-1"> </span><span class="hl-6">x2</span><span class="hl-1">, </span><span class="hl-6">y:</span><span class="hl-1"> </span><span class="hl-6">y1</span><span class="hl-1"> },</span><br/><span class="hl-1">        { </span><span class="hl-6">x:</span><span class="hl-1"> </span><span class="hl-6">x2</span><span class="hl-1">, </span><span class="hl-6">y:</span><span class="hl-1"> </span><span class="hl-6">y2</span><span class="hl-1"> },</span><br/><span class="hl-1">        { </span><span class="hl-6">x:</span><span class="hl-1"> </span><span class="hl-6">x1</span><span class="hl-1">, </span><span class="hl-6">y:</span><span class="hl-1"> </span><span class="hl-6">y2</span><span class="hl-1"> }</span><br/><span class="hl-1">    ];</span><br/><span class="hl-1">    </span><span class="hl-0">drawRectangle</span><span class="hl-1">(</span><span class="hl-6">image</span><span class="hl-1">, </span><span class="hl-6">points</span><span class="hl-1">, </span><span class="hl-6">color</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">image</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-2">&#39;output.jpg&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="futures" class="tsd-anchor-link">Futures<a href="#futures" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Slider detection</li>
<li>Import custom OCR training model</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#ddddocr-js"><span>Dddd<wbr/>Ocr <wbr/>JS</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#features"><span>Features</span></a></li><li><ul><li><a href="#basic-ocr-recognition-capability"><span>Basic <wbr/>OCR recognition capability</span></a></li><li><a href="#ocr-probability-output"><span>OCR probability output</span></a></li></ul></li><li><a href="#object-detection-capability"><span>Object detection capability</span></a></li><li><a href="#futures"><span>Futures</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">ddddocr-node</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
